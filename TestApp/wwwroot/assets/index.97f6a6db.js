var __defProp=Object.defineProperty,__defNormalProp=(t,e,n)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,__publicField=(t,e,n)=>(__defNormalProp(t,"symbol"!=typeof e?e+"":e,n),n);!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function p(){return d(" ")}function f(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let h;function m(t){h=t}const g=[],w=[],$=[],y=[],b=Promise.resolve();let _=!1;function x(t){$.push(t)}let v=!1;const F=new Set;function P(){if(!v){v=!0;do{for(let t=0;t<g.length;t+=1){const e=g[t];m(e),E(e.$$)}for(m(null),g.length=0;w.length;)w.pop()();for(let t=0;t<$.length;t+=1){const e=$[t];F.has(e)||(F.add(e),e())}$.length=0}while(g.length);for(;y.length;)y.pop()();_=!1,v=!1,F.clear()}}function E(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(x)}}const M=new Set;function S(t,e){t&&t.i&&(M.delete(t),t.i(e))}function k(t,e,n,o){if(t&&t.o){if(M.has(t))return;M.add(t),undefined.c.push((()=>{M.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function O(t){t&&t.c()}function D(t,n,r,i){const{fragment:a,on_mount:c,on_destroy:u,after_update:l}=t.$$;a&&a.m(n,r),i||x((()=>{const n=c.map(e).filter(s);u?u.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(x)}function C(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(g.push(t),_||(_=!0,b.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function T(e,s,r,i,a,c,l,d=[-1]){const p=h;m(e);const f=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(p?p.$$.context:s.context||[]),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||p.$$.root};l&&l(f.root);let g=!1;if(f.ctx=r?r(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return f.ctx&&a(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),g&&z(e,t)),n})):[],f.update(),g=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),s.target){if(s.hydrate){const t=(w=s.target,Array.from(w.childNodes));f.fragment&&f.fragment.l(t),t.forEach(u)}else f.fragment&&f.fragment.c();s.intro&&S(e.$$.fragment),D(e,s.target,s.anchor,s.customElement),P()}var w;m(p)}class j{$destroy(){C(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const N=[];function R(e,n=t){let o;const s=new Set;function i(t){if(r(e,t)&&(e=t,o)){const t=!N.length;for(const n of s)n[1](),N.push(n,e);if(t){for(let t=0;t<N.length;t+=2)N[t][0](N[t+1]);N.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,a=t){const c=[r,a];return s.add(c),1===s.size&&(o=n(i)||t),r(e),()=>{s.delete(c),0===s.size&&(o(),o=null)}}}}var V,A=new Uint8Array(16);function L(){if(!V&&!(V="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(A)}var U=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function J(t){return"string"==typeof t&&U.test(t)}for(var q,B,I=[],G=0;G<256;++G)I.push((G+256).toString(16).substr(1));function H(t,e,n){var o=(t=t||{}).random||(t.rng||L)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){n=n||0;for(var s=0;s<16;++s)e[n+s]=o[s];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(I[t[e+0]]+I[t[e+1]]+I[t[e+2]]+I[t[e+3]]+"-"+I[t[e+4]]+I[t[e+5]]+"-"+I[t[e+6]]+I[t[e+7]]+"-"+I[t[e+8]]+I[t[e+9]]+"-"+I[t[e+10]]+I[t[e+11]]+I[t[e+12]]+I[t[e+13]]+I[t[e+14]]+I[t[e+15]]).toLowerCase();if(!J(n))throw TypeError("Stringified UUID is invalid");return n}(o)}class K{constructor(t){__publicField(this,"photino"),this.photino=t}}class Q extends K{constructor(t){super(t)}readFile(t,e=null){return this.photino.send({ns:"io",action:"readFile",params:{path:t,encoding:e}})}writeFile(t,e,n=null){return this.photino.send({ns:"io",action:"writeFile",params:{path:t,contents:e,encoding:n}})}listFiles(t,e=null,n=!1){return this.photino.send({ns:"io",action:"listFiles",params:{path:t,searchPattern:e,recursive:n}})}listFolders(t,e=null,n=!1){return this.photino.send({ns:"io",action:"listFolders",params:{path:t,searchPattern:e,recursive:n}})}createFolder(t){return this.photino.send({ns:"io",action:"createFolder",params:{path:t}})}deleteFile(t){return this.photino.send({ns:"io",action:"deleteFile",params:{path:t}})}deleteFolder(t,e=!1){return this.photino.send({ns:"io",action:"deleteFolder",params:{path:t,recursive:e}})}cwd(){return this.photino.send({ns:"io",action:"cwd",params:{}})}}class W extends K{constructor(t){super(t)}joinPaths(...t){return this.photino.send({ns:"os",action:"joinPaths",params:{paths:t}})}cmd(t){return this.photino.send({ns:"os",action:"cmd",params:{command:t}})}showOpenFileDialog(t,e,...n){return this.photino.send({ns:"os",action:"showOpenFileDialog",params:{title:t,multiselect:e,filters:n}})}showOpenFolderDialog(t){return this.photino.send({ns:"os",action:"showOpenFolderDialog",params:{title:t}})}showSaveFileDialog(t,...e){return this.photino.send({ns:"os",action:"showSaveFileDialog",params:{title:t,filters:e}})}}class X extends K{constructor(t){super(t)}exit(){return this.photino.send({ns:"app",action:"exit"})}}class Y extends K{constructor(t){super(t)}setTitle(t){return this.photino.send({ns:"window",action:"setTitle",params:{title:t}})}setSize(t,e){return this.photino.send({ns:"window",action:"setSize",params:{width:t,height:e}})}maximize(){return this.photino.send({ns:"window",action:"maximize"})}minimize(){return this.photino.send({ns:"window",action:"minimize"})}restore(){return this.photino.send({ns:"window",action:"restore"})}close(){return this.photino.send({ns:"window",action:"close"})}}"function"!=typeof window.external.sendMessage&&(window.external.sendMessage=t=>console.log(`(Emulating sendMessage): ${t}`)),"function"!=typeof window.external.receiveMessage&&(window.external.receiveMessage=t=>{t("Simulating message from backend.")},window.external.receiveMessage((t=>console.log(`(Emulating receiveMessage): ${t}`)))),(B=q||(q={}))[B.Success=0]="Success",B[B.Error=1]="Error";class Z{constructor(t){__publicField(this,"_id"),__publicField(this,"data"),this._id=H(),this.data=t}}const tt={subscribe:R(new class{constructor(){__publicField(this,"io"),__publicField(this,"os"),__publicField(this,"app"),__publicField(this,"window"),this.io=new Q(this),this.os=new W(this),this.app=new X(this),this.window=new Y(this)}sendData(t){const e=new Z(t);return window.external.sendMessage(JSON.stringify(e)),new Promise((t=>{const n=setTimeout((()=>{throw new Error("Took to long for a response")}),3e4);window.external.receiveMessage((o=>{const s=JSON.parse(o);s._id===e._id&&(clearTimeout(n),t(s))}))}))}async send(t){const e=await this.sendData(t);if(0!==e.data.status)throw new Error(e.data.message);return e.data.return}},et).subscribe};var et;function nt(e){var n;let o,s,r,i,h,m,g,w=(null!=(n=e[2])?n:e[1])+"";return{c(){o=l("button"),s=d(e[0]),r=p(),i=l("div"),h=d(w)},m(t,n){var u,l,d,p;c(t,o,n),a(o,s),c(t,r,n),c(t,i,n),a(i,h),m||(u=o,l="click",d=e[3],u.addEventListener(l,d,p),g=()=>u.removeEventListener(l,d,p),m=!0)},p(t,[e]){var n;1&e&&f(s,t[0]),6&e&&w!==(w=(null!=(n=t[2])?n:t[1])+"")&&f(h,w)},i:t,o:t,d(t){t&&u(o),t&&u(r),t&&u(i),m=!1,g()}}}function ot(t,e,n){let o;i(t,tt,(t=>n(8,o=t)));var s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(s,r){function i(t){try{c(o.next(t))}catch(e){r(e)}}function a(t){try{c(o.throw(t))}catch(e){r(e)}}function c(t){t.done?s(t.value):function(t){return t instanceof n?t:new n((function(e){e(t)}))}(t.value).then(i,a)}c((o=o.apply(t,e||[])).next())}))};let r,{text:a}=e,{defaultMessage:c}=e,{ns:u}=e,{action:l}=e,{params:d=null}=e,{messageProperty:p=null}=e;return t.$$set=t=>{"text"in t&&n(0,a=t.text),"defaultMessage"in t&&n(1,c=t.defaultMessage),"ns"in t&&n(4,u=t.ns),"action"in t&&n(5,l=t.action),"params"in t&&n(6,d=t.params),"messageProperty"in t&&n(7,p=t.messageProperty)},[a,c,r,function(){return s(this,void 0,void 0,(function*(){try{console.log(d);const t=yield o[u][l](...d);console.log(t),n(2,r=null===p?t:t[p])}catch(t){n(2,r=t.toString())}}))},u,l,d,p]}class st extends j{constructor(t){super(),T(this,t,ot,nt,r,{text:0,defaultMessage:1,ns:4,action:5,params:6,messageProperty:7})}}function rt(e){let n,o,s,r,i;return o=new st({props:{text:"Current Directory",defaultMessage:"Click the button",ns:"io",action:"cwd"}}),r=new st({props:{text:"Open File",defaultMessage:"Click the button",ns:"os",action:"showOpenFileDialog",params:["Open file",!1,{name:"All files",patterns:["*.*"]}],messageProperty:"path"}}),{c(){n=l("main"),O(o.$$.fragment),s=p(),O(r.$$.fragment)},m(t,e){c(t,n,e),D(o,n,null),a(n,s),D(r,n,null),i=!0},p:t,i(t){i||(S(o.$$.fragment,t),S(r.$$.fragment,t),i=!0)},o(t){k(o.$$.fragment,t),k(r.$$.fragment,t),i=!1},d(t){t&&u(n),C(o),C(r)}}}new class extends j{constructor(t){super(),T(this,t,null,rt,r,{})}}({target:document.body})}();
